/* D3 학습 */

D3 (Data Driven Documents) : 데이터를 렌더링 할 수 있는 웹 기반 문서 라이브러리
                             데이터 시각화 라이브러리 


D3 작업 순서 : 1) 데이터를 불러온다.
             2) 작업할 공간을 선택한다.
             3) 작업할 공간에 데이터를 바인딩(연결) 한다.
             4) 연결한 것을 그린다.


1) 데이터를 불러올 때 : tsv, csv, json, xml 등의 파일을 불러오거나 서버에서 response 받을 수 있다.
2) 작업 할 공간을 선택 : 공간을 선택 할 시에 존재하지 않는 태그를 선택해야한다.
                    이미 존재하는 태그가있다면 추가로 태그가 바인딩 된다.
                    (jquery의 경우에는 이미 존재하는 태그를 선택하는 것에서 차이가 있다.)



* D3.js 에서는 나중에 그린 도형이 가장 앞에 표시된다.

* transform 속성을 조작하는데에는 scale() - 확대비율을 지정
                            rotate() - 회전각도를 지정
                            skewX(), skewY() - 기울기를 지정

기본 메서드 설명
d3.select()         -
selectAll()         -
data()              -
enter()             - 추가하고자 하는 데이터의 수와 정보
append()            - 추가할 데이터
attr(), style()     - 속성 및 스타일 추가
text()              - 텍스트
exit()              - 추가하지않을 데이터의 수와 정보 (enter메서드와 반대역할)
layout()            - 그래프 종류 선택
transition()        - 애니메이션 효과
ease()              - 세세한 움직임 지시
on()                - 이벤트 핸들러 (브라우저에서 지정할 수 있는 이벤트라면 무엇이든 지정가능)


SVG (Scalable Vector Graphics)
- 벡터를 기반으로 한 그래픽을 그리는데 사용하는 마크업 언어
- XML의 한 종류이므로 XML문법을 그대로 이용 가능


* D3.js 자체에는 그래픽을 그리는 기능이 없다.


svg 도형 요소
rect        - 사각형/둥근모서리 사각형
circle      - 원
ellipse     - 타원형
line        - 직선
polyline    - 연속 직선
polygon     - 다각형/폴리곤
path        - 패스(복잡한 도형을 그림)        요소 : d (패스 데이터)
text        - 문자

D3.js에서 사용하는 도형 요소는 rect, circle, path, text, g(그룹화를 수행)

d의 속성으로 지정할 수 있는 명령
이동과 관련된 명령           : M(절대 x, y좌표) , m(상대 x, y좌표)
패스 제어와 관련된 명령       : Z 혹은 z (패스를 닫음)
직선 그리기와 관련된 명령      : L(절대 x, y좌표) , l(상대 x, y좌표)
곡선 그리기와 관련된 명령      : C(절대 x, y좌표) , c(상대 x, y좌표)
타원이나 호와 관련된 명령      : A(절대 x, y좌표) , a(상대 x, y좌표)

도형에서 기본 스타일 지정
fill            - 칠하기 색
stroke          - 선의 색
opacity         - 불투명도
stroke-width    - 선의 굵기


* append를 하는 경우에 처음 요소에 추가로 되는것이 아니라 이전에 생성한 요소 안에 다음 요소를 생성 한다.
* attr 메서드만으로 모든 요소의 색과 크기를 지정할 수 있다.


데이터를 불러올 때   //data[i]["상품A"]
헤더가 영문인경우에는 예를들어 item1 으로 씀
     한문인경우네는 예를들어 ["상품A"]로 씀



====================================================================================================

텍스트 넣어주는 경우

css - text-anchor : start(왼쪽부터 그림-기본), middle(가운데부터 그림), end(오른쪽부터 그림)
    - writing-mode : lr, lr-tb(왼쪽에서 오른쪽), rl-tb(오른쪽에서 왼쪽), tb, tb-rl(위에서아래)
    - glyph-orientation-vertical : 0, 90, 180, 270  설정가능

* glyph-orientation-vertical 동작이 안되는데 이유를 모르겠다. 나중에 찾아보자



눈금 지정 해주는 경우
ticks(눈금의 간격) 메서드로 간격을 지정할 수 있다. 기본값은 10

다른 눈금을 지정 해주는 경우
tickValues([10,20,30,50,100,500,1000]) 메서드로 배열 상태로 설정해 줄 수 있다.

서식지정
tickFormat(d3.format(".2f"))

====================================================================================================

on() 메서드에 설정할 수 있는 주요 이벤트

click       - 클릭 이벤트
dbclick     - 더블클릭 이벤트
mouseover   - 마우스 올렸을 때의 이벤트
mouseout    - 마우스 나갔을 때의 이벤트
mousemove   - 마우스를 이동했을 때의 이벤트
keydown     - 키를 눌렀을 때의 이벤트
keyup       - 키에서 손을 떼었을 때의 이벤트
change      - 내용 변화 이벤트
load        - 읽기 완료 이벤트

====================================================================================================

D3.js 의 레이아웃 기능

Chord       - 코드 레이아웃
Cluster     - 클라우드 레이아웃
Force       - 역학/포스 레이아웃
Hierachy    - 계층화 레이아웃
Histogram   - 히스토그램
Pack        - 팩 레이아웃(Hierachy의 일종)
Partition   - 파티션 레이아웃(Hierachy의 일종)
Pie         - 원 레이아웃
Stack       - 누적 레이아웃
Tree        - 트리 레이아웃(Hierachy의 일종)
Treemap     - 트리맵 레이아웃(Hierachy의 일종)

====================================================================================================

색상을 지정해 주는 경우
d3에서 제공하는 기본 10색과 20색
d3.scale.category10()
d3.scale.category20()
d3.scale.category20b()

====================================================================================================

ease() 메서드 - 애니메이션 움직임 지정
in, out, in-out, out-in
linear, poly(k), quad, cubic
sin, exp, circle, elastic(a, p)
back(s), bounce




